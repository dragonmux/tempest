<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memory Map &mdash; Tempest  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Programming" href="programming.html" />
    <link rel="prev" title="What is PDI" href="pdi.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Tempest
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pdi.html">What is PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pdi.html#the-component-in-the-mcu">The component in the MCU</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdi.html#the-instruction-set">The instruction set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#lds">LDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#ld">LD</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#sts">STS</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#st">ST</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#ldcs">LDCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#repeat">REPEAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#stcs">STCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#key">KEY</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#size-rules">Size Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#pointer-rules">Pointer Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#pdi-registers">PDI Registers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#status-register">Status Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#reset-register">Reset Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#control-register">Control Register</a></li>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#register-r3">Register r3</a></li>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#register-r4">Register r4</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pdi.html#native-pdi-protocol">Native PDI protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdi.html#jtag-pdi-protocol">JTAG-PDI protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#the-tap-instruction-register">The TAP instruction register</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#identification-ir-idcode">Identification (IR = IDCode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdi.html#pdi-mode-ir-pdi">PDI Mode (IR = PDI)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#pdi-frame-format">PDI Frame Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="pdi.html#the-conversation-a-worked-example">The conversation, a worked example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Memory Map</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#processor-controller">Processor Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#breakpoint-unit">Breakpoint Unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-memory">Data Memory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="programming.html">Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging/index.html">Debugging using PDI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#initiating-a-debug-session">Initiating a debug session</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#put-the-processor-into-reset">Put the processor into reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#turn-the-debug-interface-on">Turn the debug interface on</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#take-the-reset-processor-and-put-it-in-debug-pause-state">Take the reset processor and put it in debug pause state</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#running-the-processor-to-an-address">Running the processor to an address</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#set-up-run-to-address">Set up run-to-address</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#set-the-program-counter-to-a-specific-address">Set the program counter to a specific address</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#run-the-program-to-breakpoint">Run the program to breakpoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#clean-up">Clean up</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#reading-processor-state">Reading processor state</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#read-program-counter-pc-1">Read program counter (PC+1)</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#clean-up-verification">Clean up verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#read-back-stack-pointer-sreg">Read back Stack Pointer + SREG</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#verify-state">Verify state</a></li>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#reading-back-the-avr-registers">Reading back the AVR registers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging/index.html#single-stepping">Single Stepping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="debugging/index.html#setting-up-the-breakpoint">Setting up the breakpoint</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#cc-by-sa-2-0">CC-BY-SA 2.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tempest</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Memory Map</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/memory.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="memory-map">
<h1>Memory Map<a class="headerlink" href="#memory-map" title="Link to this heading"></a></h1>
<p>The ATXMega256A3U PDI controller has the following memory map:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+==============+ &lt;- 0x00000000
|   Processor  |
|  Controller  |
+--------------+ &lt;- 0x00000020
|  Breakpoint  |
|     Unit     |
+--------------+ &lt;- 0x00000060
|              |
+--------------+ &lt;- 0x00000100
|  (reserved)  |
+==============+ &lt;- 0x00800000
| Application  |
|    Section   |
+--------------+ &lt;- 0x00840000
|  Bootloader  |
|    Section   |
+==============+ &lt;- 0x00842000
|  (reserved)  |
+==============+ &lt;- 0x008C0000
|    EEPROM    |
+==============+ &lt;- 0x008C1000
|  (reserved)  |
+==============+ &lt;- 0x008E0200
|  Signature   | Two flash pages
|      Row     | (256 * 2)
+==============+ &lt;- 0x008E0600
|  (reserved)  |
+==============+ &lt;- 0x008F0020
|    Fuses     |
+==============+ &lt;- 0x008F0026
|  (reserved)  |
+==============+ &lt;- 0x01000000
|  Data Memory |
| (Mapped IO + |
(     SRAM)    |
+==============+ &lt;- 0x02000000
</pre></div>
</div>
<section id="processor-controller">
<h2>Processor Controller<a class="headerlink" href="#processor-controller" title="Link to this heading"></a></h2>
<p>The processor controller has the following memory layout:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+=========================+
| Multi-function register | +0x0
+-------------------------+
| Program Counter  (next) | +0x4
+-------------------------+
|      Debug Control      | +0xa
+-------------------------+
|         I/O FIFO        | +0xc
+-------------------------+
|            ⋮           |
+=========================+
</pre></div>
</div>
</section>
<section id="breakpoint-unit">
<h2>Breakpoint Unit<a class="headerlink" href="#breakpoint-unit" title="Link to this heading"></a></h2>
<p>The breakpoint unit has the following memory layout:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+===================+
|  break address 1  | +0x00
+-------------------+
|  break address 2  | +0x04
+-------------------+
| breakpoint  count | +0x08
+-------------------+
|         ⋮         |
+-------------------+
|        ???        | +0x20
+-------------------+
|        ???        | +0x24
+-------------------+
|        ???        | +0x28
+-------------------+
|         ⋮         |
+-------------------+
|        ???        | +0x30
+===================+
</pre></div>
</div>
</section>
<section id="data-memory">
<h2>Data Memory<a class="headerlink" href="#data-memory" title="Link to this heading"></a></h2>
<p>The data memory area maps the main chip memory (MMIO + SRAM) to the PDI address space. This has the following layout:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+===============+ &lt;- 0x01000000
|   GPIO Regs   |
+---------------+ &lt;- 0x01000010
|    VPORT 0    |
+---------------+ &lt;- 0x01000014
|    VPORT 1    |
+---------------+ &lt;- 0x01000018
|    VPORT 2    |
+---------------+ &lt;- 0x0100001C
|    VPORT 3    |
+---------------+ &lt;- 0x01000030
|      CPU      |
+---------------+ &lt;- 0x01000040
|      CLK      |
+---------------+ &lt;- 0x01000048
|     SLEEP     |
+---------------+ &lt;- 0x01000050
|      OSC      |
+---------------+ &lt;- 0x01000060
|   DFLLRC32M   |
+---------------+ &lt;- 0x01000068
|   DFLLRC2M    |
+---------------+ &lt;- 0x01000070
|      PR       |
+---------------+ &lt;- 0x01000078
|      RST      |
+---------------+ &lt;- 0x01000080
|      WDT      |
+---------------+ &lt;- 0x01000090
|      MCU      |
+---------------+ &lt;- 0x010000A0
|     PMIC      |
+---------------+ &lt;- 0x010000B0
|    PORTTCFG   |
+---------------+ &lt;- 0x010000C0
|      AES      |
+---------------+ &lt;- 0x010000D0
|      CRC      |
+---------------+ &lt;- 0x010000F0
|     VBAT      |
+---------------+ &lt;- 0x01000100
|      DMA      |
+---------------+ &lt;- 0x01000180
|     EVSYS     |
+---------------+ &lt;- 0x010001C0
|      NVM      |
+---------------+ &lt;- 0x01000200
|     ADC A     |
+---------------+ &lt;- 0x01000240
|     ADC B     |
+---------------+ &lt;- 0x01000300
|     DAC A     |
+---------------+ &lt;- 0x01000320
|     DAC B     |
+---------------+ &lt;- 0x01000380
|      ACA      |
+---------------+ &lt;- 0x01000390
|      ACB      |
+---------------+ &lt;- 0x01000400
|      RTC      |
+---------------+ &lt;- 0x01000420
|     RTC32     |
+---------------+ &lt;- 0x01000440
|      EBI      |
+---------------+ &lt;- 0x01000480
|     TWI C     |
+---------------+ &lt;- 0x01000490
|     TWI D     |
+---------------+ &lt;- 0x010004A0
|     TWI E     |
+---------------+ &lt;- 0x010004B0
|     TWI F     |
+---------------+ &lt;- 0x010004C0
|      USB      |
+---------------+ &lt;- 0x01000600
|     PORTA     |
+---------------+ &lt;- 0x01000620
|     PORTB     |
+---------------+ &lt;- 0x01000640
|     PORTC     |
+---------------+ &lt;- 0x01000660
|     PORTD     |
+---------------+ &lt;- 0x01000680
|     PORTE     |
+---------------+ &lt;- 0x010006A0
|     PORTF     |
+---------------+ &lt;- 0x010006E0
|     PORTH     |
+---------------+ &lt;- 0x01000700
|     PORTJ     |
+---------------+ &lt;- 0x01000720
|     PORTK     |
+---------------+ &lt;- 0x010007C0
|     PORTQ     |
+---------------+ &lt;- 0x010007E0
|     PORTR     |
+---------------+ &lt;- 0x01000800
|     TCC 0     |
+---------------+ &lt;- 0x01000840
|     TCC 1     |
+---------------+ &lt;- 0x01000880
|     AWEXC     |
+---------------+ &lt;- 0x01000890
|    HIRES C    |
+---------------+ &lt;- 0x010008A0
|    USARTC0    |
+---------------+ &lt;- 0x010008B0
|    USARTC1    |
+---------------+ &lt;- 0x010008C0
|     SPI C     |
+---------------+ &lt;- 0x010008F8
|     IRCOM     |
+---------------+ &lt;- 0x01000900
|     TC D0     |
+---------------+ &lt;- 0x01000940
|     TC D1     |
+---------------+ &lt;- 0x01000980
|     AWEXD     |
+---------------+ &lt;- 0x01000990
|    HIRES D    |
+---------------+ &lt;- 0x010009A0
|    USARTD0    |
+---------------+ &lt;- 0x010009B0
|    USARTD1    |
+---------------+ &lt;- 0x010009C0
|     SPI D     |
+---------------+ &lt;- 0x01000A00
|     TC E0     |
+---------------+ &lt;- 0x01000A40
|     TC E1     |
+---------------+ &lt;- 0x01000A80
|     AWEXE     |
+---------------+ &lt;- 0x01000A90
|    HIRES E    |
+---------------+ &lt;- 0x01000AA0
|    USARTE0    |
+---------------+ &lt;- 0x01000AB0
|    USARTE1    |
+---------------+ &lt;- 0x01000AC0
|     SPI E     |
+---------------+ &lt;- 0x01000B00
|     TC F0     |
+---------------+ &lt;- 0x01000B40
|     TC F1     |
+---------------+ &lt;- 0x01000B80
|     AWEXF     |
+---------------+ &lt;- 0x01000B90
|    HIRES F    |
+---------------+ &lt;- 0x01000BA0
|    USARTF0    |
+---------------+ &lt;- 0x01000BB0
|    USARTF1    |
+---------------+ &lt;- 0x01000BC0
|     SPI F     |
+===============+ &lt;- 0x01001000
|    EEPROM     |
+===============+ &lt;- 0x01002000
| Internal SRAM |
+===============+ &lt;- 0x01002800
| External  RAM |
+===============+ &lt;- 0x02000000
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pdi.html" class="btn btn-neutral float-left" title="What is PDI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="programming.html" class="btn btn-neutral float-right" title="Programming" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Tempest Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>